<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
</head>
<link rel="stylesheet" href="../STYLE.css">
<body TEXT="#000000" BGCOLOR="#E7E3E7" LINK="#004080" VLINK="#004080" olink="#008080" Background="">
<table BORDER=0   COLS=3 WIDTH="16%" >
  <tr> 
    <td><a href="Index2.html"><img SRC="Back.gif"  BORDER=0 ></a></td>
    <td WIDTH="10%"><a href="../menu.html"><img SRC="Menu.gif" BORDER=0 ></a></td>
    <td ALIGN=RIGHT><a href="Index4.html"><img SRC="For.gif" BORDER=0 ></a></td>
  </tr>
</table>

 
<br>
<table width="100%" border="0">
  <tr>
    <td class="Text_n">
 
<p class="Tit_CN">

Инвентаризация связки и деревьев</P>

<p class="Text_n">
В состоянии &quot;зомби&quot;, когда установлено соединение без регистрации, можно получить огромное количество информации, гораздо больше, чем можно себе представить. Такие средства, как userinfo, userdump, finger, bindery, bindin, nlist и сх, позволяют получить данные о связке. Приложения, подобные On-Site Admin, предоставляют информацию о дереве NDS. Все вместе эти утилиты обеспечивают взломщика большими знаниями, которые позволят ему получить доступ к серверам. Помните о том, что вся необходимая информация доступна через единственное соединение с сервером Novell.
<br>
<P align="center">
<span class="Text_b">
userinfo</span></P>
<br>
<p class="Text_n">
Мы используем утилиту userinfo версии 1.04, которая изначально называлась NetWare User Information Listing. Написанная Тимом Швабом (Tim Schwab), утилита позволяет быстро получить дамп всех пользователей, содержащихся в структуре связки сервера. Утилита userinfo позволяет также осуществлять поиск по одному имени пользователя. Для этого достаточно указать его в качестве параметра. Как видно из следующего рисунка, присоединившись к серверу SECRET и запустив утилиту userinfo, можно извлечь имена всех пользователей системы, включая идентификатор каждого пользовательского объекта (object JD).


<p class="label"><IMG src="1.gif"   ><br></p>

 <p class="Text_n">
<P align="center">
<span class="Text_b">
userdump</span></P>
<br>
<p class="Text_n">Утилита userdump версии 1.3 Роя Коуша (Roy Coates) аналогична userinfo в том, что отображает все пользовательские имена на присоединенном сервере, однако в то же время она предоставляет и полные имена, как видно из
следующего рисунка. Эта информация может пригодиться взломщикам для выполнения задач социальной инженерии. Например, можно позвонить в отдел технической поддержки компании и попросить обнулить пароль пользователя, имя которого стало известно.


<p class="label"><IMG src="2.gif"><br></p>

 <p class="Text_n">
<P align="center">
<span class="Text_b">
finger</span></P>
<br>
<p class="Text_n">
Для инвентаризации пользователей системы нет необходимости использовать утилиту finger. Однако мы включили ее в этот раздел, поскольку она оказывается полезной, когда требуется определить, существует ли в системе определенный пользователь. Например, взломщик мог проникнуть на компьютер под управлением системы NT или UNIX и получить несколько имен пользователей и паролей. Кроме того, ему известно, что (а) пользователи зачастую имеют учетные записи на других узлах и (б) для простоты они пользуются одним и тем же паролем. Следовательно, полученными пользовательскими именами и паролями взломщик может воспользоваться для проникновения в другие системы, например серверы Novell. Для поиска пользователей в системе просто введите команду finger &lt;имя-пользователя&gt;.
<br>

При запуске утилиты finger соблюдайте осторожность, поскольку она может оказаться слишком &quot;шумной&quot;. По непонятным причинам, если finger применяется для поиска зарегистрированного в данный момент пользователя, на рабочем столе иногда появляется диалоговое окно системы NetWare с пустым сообщением.
<br>
<P align="center">
<span class="Text_b">
bindery</span></P>
<br>
<p class="Text_n">
Выявить пользователей, имеющихся на сервере, очень важно. Однако для того чтобы предпринять попытку проникновения, взломщику необходимо иметь в своем распоряжении немного больше информации. Например, кто из пользователей принадлежит к группе администраторов9 Программа NetWare Bindery Listing версии 1.16, разработанная компанией Manth-Brownell, Inc., предоставляет информацию практически о любом объекте связки (bindery object) (рис. 7.1). Программа bindery позволяет также отправить запрос об одном пользователе или группе. Например, просто введите команду bindery admins, чтобы получить список членов группы Admins. Параметр /В пригодится при одновременном просмотре большого количества объектов, поскольку в этом случае вывод информации будет выполняться по одной строке для каждого объекта.


<p class="label"><IMG src="3.gif" ><br>
<br>
Рис.7.1. Программа bindery предоставляет о
системе NetWare огромное количество
информации, в том числе принадлежность к
группе (например, Admins)</p>

 <p class="Text_n">
<P align="center">
<span class="Text_b">
bindin</span></P>
<br>
<p class="Text_n">
Как и программа bindery, bindin позволяет просмотреть различные объекты, такие как серверы, пользователи и группы, однако имеет более организованный интерфейс. Как и bindery, утилита bindin позволяет извлечь и данные о членстве в группах. Так что с ее помощью можно получить список пользователей из наиболее важных групп, таких как MIS, IT, ADMINS,
GENERALADMINS, LOCALADMINS И Т.Д.
<br>
<ul>
  <li>&nbsp;Введите команду <span class="Text_b"> bindin u</span>, чтобы получить с сервера список всех пользователей.&nbsp;</li>
  <li>&nbsp;Введите команду<span class="Text_b"> bindin g</span>, чтобы получить перечень всех групп и их членов.</li>
</ul>
<P align="center">
<span class="Text_b">
nlist</span></P>
<br>
<p class="Text_n">
Утилита nlist содержится в папке SYS: PUBLIC системы NetWare и заменяет&nbsp;
утилиту NetWare З.д: si 1st, позволяющую просматривать все серверы сети NetWare. В то же время утилита nlist предоставляет гораздо более широкие возможности, а именно позволяет просматривать данные о пользователях (user), группах (group), серверах (server), очередях (queue) и томах (volume). В основном она служит для получения перечня пользователей на сервере Novel и групп, к которым они принадлежат.
<br>
<ul>
  <li>&nbsp;nlist  user   /d. Отображается информация о заданных пользователях сервера в стандартном формате.</li>
  <li>&nbsp;nlist groups  /d. Отображаются данные о группах сервера вместе с их членами.</li>
  <li>&nbsp;nlist  server  /d. Отображается информация обо всех серверах сети.</li>
  <li>&nbsp;nlist  /ot=*   /dyn  /d. Предоставляются данные обо всех объектах, как видно из следующего рисунка.</li>
</ul>

<p class="label"><IMG src="4.gif" ><br>
</p>

 <p class="Text_n">
Утилиту nlist особенно полезно использовать для получения свойств объекта, таких как должность (title), фамилия (surname), номер телефона (phone number) и др.
<br>
<P align="center">
<span class="Text_b">СХ</span></P>
<br>
<p class="Text_n">
Небольшая утилита Change Context (сх) при каждой установке системы NetWare 4.x помещается в папку SYS: PUBLIC. Она отображает информацию о дереве NDS или о его небольшой части. Эта утилита оказывается чрезвычайно полезной при поиске определенных объектов внутри дерева. Например, если на определенном сервере взломщик узнал пароль пользователя ECULP, то с помощью утилиты сх можно выполнить поиск во всем дереве NDS других серверов, которые способны аутентифицировать данного пользователя. Вот несколько примеров использования утилиты сх.
<br>

Для изменения текущего контекста на [ROOT] введите команду
<span class="Text_b"> сх /r</span>
<br>

Для изменения текущего контекста и перехода в дереве на один объект вверх введите команду
<span class="Text_b"> сх   .</span>
<br>

Для задания определенного контекста введите команду
<span class="Text_b"> сх .engineering.newyork.hss</span>
<br>

 При задании контекста относительно [ROOT] убедитесь, что в начале указан символ . (точка), как в предыдущем примере.
<br>

Для вывода списка всех объектов-контейнеров, расположенных в текущем контексте или ниже него, воспользуйтесь командой
<span class="Text_b"> сх/t</span>
<br>

Для вывода списка всех объектов, расположенных в текущем контексте или ниже него, воспользуйтесь командой
<span class="Text_b">сх  /t  /a</span>
<br>

Для просмотра всех объектов в заданном контексте введите команду
<span class="Text_b">сх .engineering.newyork.hss /t /a</span>
<br>

И наконец, для вывода всех объектов, начиная с [ROOT], введите команду
<span class="Text_b">сх /t /а /r</span>
<br>

Если требуется получить структуру всего дерева NDS, просто введите команду ex /t /а /г, как показано на рис. 7.2.


<p class="label"><IMG src="5.gif" ><br>
<br>
Рис. 7.2.   На   основе  информации,   полученной  с  помощью  утилиты   сх, взломщик может узнать практически все об инфраструктуре NetWare</p>

 <p class="Text_n">

<p class="Prim">
 Если при использовании команд сх у вас возникают проблемы (например, генерируются такие ошибки, как сх-4 .20-240), то в дальнейшем лучше прибегнуть к утилите просмотра дерева On-Site, которая подробно рассматривается ниже в данной главе. Подобная проблема иногда возникает при удаленных соединениях с сетью. При этом генерируются такие ошибки, как

<p class="Code">
СХ-4.20-240: The context you want to change to does not exist.<br>
You  tried  to  change   to: ACME<br>
Your  context  will  be  left  unchanged as: [Root]</p>
</p>
<P align="center">
<span class="Text_b">
On-Site Administrator</span></P>
<br>
<p class="Text_n">
Как вы узнали из главы 3, по умолчанию система NetWare разрешает просматривать все дерево NDS любому пользователю. Данные, полученные в результате просмотра дерева, могут оказаться чрезвычайно полезными для взломщика, поскольку графически отображают каждый объект дерева, включая контейнеры, серверы, пользователей, группы, принтеры и т.д.
<br>

Возможности по инвентаризации каждого контейнера в дереве NDS, обеспечиваемые утилитой сх, предоставляет также графическая подсистема утилиты On-Site. TreeForm. С ее помощью в виде дерева можно отобразить каждое дерево, контейнер и объекты-листья, как показано на рис. 7.3.


<p class="label"><IMG src="6.gif"><br>
<br>
Рис. 7.3. Просмотреть все деревья NDS в сети можно с использованием утилиты On-Site, просто щелкнув на кнопке Tree панели инструментов. Не забывайте о том, что перед тем, как приступить к просмотру дерева, нужно создать нача.1ьное соединение с сервером</p>

 <p class="Text_n">

<P align="center">
<span class="Text_b">
Контрмеры против инвентаризации</span></P>
<br>
<p class="Text_n">
Защититься от прав просмотра [PUBLIC] объекта [ROOT] , устанавливаемого в системе NetWare 4.x по умолчанию, можно двумя способами. Наши рекомендации можно найти в главе 3.
<br>


</p></td>
  </tr>
</table>
<br>
<table BORDER=0  COLS=3 WIDTH="11%" >
  <tr> 
   <td><a href="Index2.html"><img SRC="Back.gif"  BORDER=0 ></a></td>
    <td WIDTH="10%"><a href="../menu.html"><img SRC="Menu.gif" BORDER=0 ></a></td>
    <td ALIGN=RIGHT><a href="Index4.html"><img SRC="For.gif" BORDER=0 ></a></td>
   
  </tr>
</table>
</body>
</html>
